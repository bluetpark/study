<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0">
  <title>Line Play</title>
  <link rel="stylesheet" type="text/css" href="css/common.css">
  <script src="https://code.jquery.com/jquery-latest.js"></script>
  <script>
    (function () {
      $(document).ready(function () {
        $('.swiper-wrapper').find('li').each(function (i) {
          $(this).append("<span style=\"position:absolute;top:0;left:0;padding:4px 8px;background:red;color:#fff;font-weigth:bold\">" + i + "</span>");
        });
        var randomVal = null;
        var lineplay = {
          init : function () {
            this.setElements();
            this.bindEvents();
            this.setArr();
          },
          setElements : function () {
            this.listWrap = $('.swiper-wrapper');
            this.randomBtn = $('.btn_random');
          },
          bindEvents : function () {
            this.randomBtn.on('click', $.proxy(this.randomAvatar, this));
          },
          setArr : function () { // 배열 생성 함수
            this.arr = []; // 배열 선언 & 초기화
            for (var i = 0, max = this.listWrap.find('li').length; i < max; i++) {
              this.arr.push(i); // .swiper-slide 개수만큼 배열에 요소 추가
            }
            initIdx = Math.floor(Math.random() * max); // 초기 인덱스값 랜덤 생성
            if ( randomVal == initIdx) {
              this.setArr(); // 이전 아바타 슬라이드와 새로 생성된 초기 인덱스 값이 같은 경우 배열 생성 함수 다시 실행
            }
            console.log(this.arr);
            this.listWrap.find('li').eq(initIdx).show().siblings().hide(); // 초기 인덱스값에 해당하는 슬라이드 노출, 나머지 감춤
            this.arr.splice(initIdx, 1); // 초기 인덱스 배열에서 제거
            console.log(this.arr);
          },
          randomAvatar : function () { // 랜덤 아바타 보기 함수
            nowArrLen = this.arr.length; // 버튼을 누른 현재시점의 배열의 길이
            randomIdx = Math.floor(Math.random() * nowArrLen); // 랜덤 인덱스값 생성
            randomVal = this.arr[randomIdx]; // 랜덤 인덱스값에 해당하는 배열 값
            if ( nowArrLen == 1 ) {
              this.setArr(); // 배열 개수가 마지막 1개인 경우 배열 생성 함수 다시 실행
            } else {
              this.listWrap.find('li').eq(randomVal).show().siblings().hide(); // 배열 값에 해당하는 .swiper-slide 노출, 나머지 감춤
              this.arr.splice(randomIdx, 1); // 랜덤 인덱스 배열에서 제거
              console.log(this.arr);
            }
          }
        }
        lineplay.init();
      });
    })();
  </script>
</head>
<body>
  <div class="create_wrap">
    <div class="swiper-container">
      <ul class="swiper-wrapper">
      <li class="swiper-slide">
        <span class="avatar_box">
          <img src="img/avatar_01.jpg" alt="avatar image" class="img_avatar">
        </span>
      </li>
      <li class="swiper-slide">
        <span class="avatar_box">
          <img src="img/avatar_02.jpg" alt="avatar image" class="img_avatar">
        </span>
      </li>
      <li class="swiper-slide">
        <span class="avatar_box">
          <img src="img/avatar_03.jpg" alt="avatar image" class="img_avatar">
        </span>
      </li>
      <li class="swiper-slide">
        <span class="avatar_box">
          <img src="img/avatar_04.jpg" alt="avatar image" class="img_avatar">
        </span>
      </li>
      <li class="swiper-slide">
        <span class="avatar_box">
          <img src="img/avatar_05.jpg" alt="avatar image" class="img_avatar">
        </span>
      </li>
      <li class="swiper-slide">
        <span class="avatar_box">
          <img src="img/avatar_06.jpg" alt="avatar image" class="img_avatar">
        </span>
      </li>
      <li class="swiper-slide">
        <span class="avatar_box">
          <img src="img/avatar_07.jpg" alt="avatar image" class="img_avatar">
        </span>
      </li>
      <li class="swiper-slide">
        <span class="avatar_box">
          <img src="img/avatar_08.jpg" alt="avatar image" class="img_avatar">
        </span>
      </li>
      <li class="swiper-slide">
        <span class="avatar_box">
          <img src="img/avatar_09.jpg" alt="avatar image" class="img_avatar">
        </span>
      </li>
      <li class="swiper-slide">
        <span class="avatar_box">
          <img src="img/avatar_10.jpg" alt="avatar image" class="img_avatar">
        </span>
      </li>
      <li class="swiper-slide">
        <span class="avatar_box">
          <img src="img/avatar_11.jpg" alt="avatar image" class="img_avatar">
        </span>
      </li>
      <li class="swiper-slide">
        <span class="avatar_box">
          <img src="img/avatar_12.jpg" alt="avatar image" class="img_avatar">
        </span>
      </li>
      </ul>
    </div>
    <button type="button" class="btn_random"><span>다른 아바타 보기</span></button>
  </div>
</body>
</html>